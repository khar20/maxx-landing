---
import Layout from '@layouts/Layout.astro';
import Header from '@components/Header.astro';
import SectionContainer from '@components/SectionContainer.astro';
import Footer from '@components/Footer.astro';

import PricingHeader from '@components/PricingHeader.astro';
import PricingCard from '@components/PricingCard.astro';
import BusinessAdvantages from '@components/BusinessAdvantages.astro';
import FAQ from '@components/FAQ.astro';
import CustomPlan from '@components/CustomPlan.astro';

import type { ColorOption } from '@components/PricingCard.astro';
import PricingSegmentSelector from '@components/PricingSegmentSelector.astro';
import Contact from '@components/Contact.astro';

const services = [];
---

<Layout>
	<Header />
	<main
		transition:animate="slide"
		class="flex-1 text-gray-900 dark:border-white dark:bg-[#050814] dark:text-gray-200"
	>
		<SectionContainer
			id="services"
			class="flex min-h-screen w-full items-center justify-center from-[#0e173a] to-[#050814] px-4 dark:bg-linear-to-b"
		>
			<h1 class="text-center text-4xl font-bold">Nuestros Servicios</h1>
		</SectionContainer>
		<SectionContainer
			id="contact"
			class="flex items-center justify-center p-4"
		>
			<Contact />
		</SectionContainer>
	</main>
	<Footer />
</Layout>

<script>
	document.addEventListener('astro:page-load', () => {
		const personalTab = document.getElementById('personal-tab');
		const empresarialTab = document.getElementById('empresarial-tab');
		const personalCards = document.getElementById('personal-plans');
		const empresarialCards = document.getElementById('business-plans');
		const customPlanSection = document.getElementById(
			'custom-plan-section'
		);

		function switchSegment(segment: 'personal' | 'empresarial'): void {
			if (
				!personalTab ||
				!empresarialTab ||
				!personalCards ||
				!empresarialCards
			) {
				console.error(
					'No se encontraron algunos elementos necesarios en el DOM'
				);
				return;
			}

			if (segment === 'personal') {
				personalTab.classList.add(
					'bg-white',
					'dark:bg-gray-700',
					'shadow-sm'
				);
				personalTab.classList.remove(
					'text-gray-500',
					'hover:text-gray-700',
					'dark:hover:text-gray-300'
				);

				empresarialTab.classList.remove(
					'bg-white',
					'dark:bg-gray-700',
					'shadow-sm'
				);
				empresarialTab.classList.add(
					'text-gray-500',
					'hover:text-gray-700',
					'dark:hover:text-gray-300'
				);

				personalCards.classList.remove('hidden');
				personalCards.classList.add('block');
				empresarialCards.classList.remove('block');
				empresarialCards.classList.add('hidden');

				const businessAdvantagesInner = document.querySelector(
					'#business-advantages'
				);
				if (businessAdvantagesInner) {
					businessAdvantagesInner.classList.remove('block');
					businessAdvantagesInner.classList.add('hidden');
				}

				updateCustomPlan('personal');
			} else {
				empresarialTab.classList.add(
					'bg-white',
					'dark:bg-gray-700',
					'shadow-sm'
				);
				empresarialTab.classList.remove(
					'text-gray-500',
					'hover:text-gray-700',
					'dark:hover:text-gray-300'
				);

				personalTab.classList.remove(
					'bg-white',
					'dark:bg-gray-700',
					'shadow-sm'
				);
				personalTab.classList.add(
					'text-gray-500',
					'hover:text-gray-700',
					'dark:hover:text-gray-300'
				);

				empresarialCards.classList.remove('hidden');
				empresarialCards.classList.add('block');
				personalCards.classList.remove('block');
				personalCards.classList.add('hidden');

				const businessAdvantagesInner = document.querySelector(
					'#business-advantages'
				);
				if (businessAdvantagesInner) {
					businessAdvantagesInner.classList.remove('hidden');
					businessAdvantagesInner.classList.add('block');
				}

				updateCustomPlan('empresarial');
			}
		}

		function updateCustomPlan(segment: 'personal' | 'empresarial'): void {
			const customPlanElement = document.querySelector(
				'#custom-plan-section'
			);
			if (customPlanElement) {
				const customPlanTitle = customPlanElement.querySelector('h2');
				const customPlanDescription =
					customPlanElement.querySelector('p');

				if (customPlanTitle) {
					customPlanTitle.textContent =
						segment === 'personal'
							? '¿Necesitas un plan personalizado?'
							: '¿Buscas una solución a medida para tu empresa?';
				}

				if (customPlanDescription) {
					customPlanDescription.textContent =
						segment === 'personal'
							? 'Contacta con nuestro equipo para crear un plan adaptado específicamente a tus necesidades.'
							: 'Nuestro equipo de consultores empresariales puede diseñar una solución específica que se adapte al tamaño y necesidades de tu organización.';
				}
			}
		}

		if (personalTab && empresarialTab) {
			personalTab.addEventListener('click', () =>
				switchSegment('personal')
			);
			empresarialTab.addEventListener('click', () =>
				switchSegment('empresarial')
			);
		}
	});
</script>

<style>
	@keyframes pulse {
		0%,
		100% {
			transform: scale(1);
		}
		50% {
			transform: scale(1.02);
		}
	}

	.popular-plan {
		animation: pulse 2s infinite;
	}
</style>
